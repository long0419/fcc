(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22230b"],{ce0c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"netcon"}},[a("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"100%"}},[a("v-divider"),a("v-card",[a("v-card-title",{staticClass:"grey lighten-4"},[t._v("不动产登记业务缴税 "),a("v-spacer"),a("v-text-field",{attrs:{label:"按内容查询","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-btn",{attrs:{icon:""},on:{click:t.refreshTaxList}},[a("v-icon",[t._v("fas fa-sync-alt")])],1),a("v-btn",{attrs:{icon:""},on:{click:t.onCreate}},[a("v-icon",[t._v("fas fa-plus")])],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,search:t.search},scopedSlots:t._u([{key:"item.TaxID",fn:function(e){var s=e.item;return[a("v-chip",{attrs:{color:t.getColorByCC(s.IsCCed)}},[t._v(t._s(s.TaxID))])]}},{key:"item.action",fn:function(e){var s=e.item;return[a("v-btn",{attrs:{color:"success",disabled:!t.getDisToCC(s.IsCCed)},on:{click:function(e){return t.onToCC(s.ID,s.TaxID,s.Taxer,s.Area,s.Tax)}}},[t._v("上链")]),a("v-btn",{attrs:{color:"info",disabled:t.getDisToCC(s.IsCCed)},on:{click:function(e){return t.queryCC(s.TaxID)}}},[t._v("查链")])]}}])})],1)],1),a("v-dialog",{attrs:{width:"800"},model:{value:t.showdialog,callback:function(e){t.showdialog=e},expression:"showdialog"}},[a("v-card",{attrs:{"fill-height":""}},[a("v-card-title",{staticClass:"title grey lighten-2",attrs:{"primary-title":""}},[t._v(t._s(t.getDialogTitle(t.dialogtype)))]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{hidden:!0},model:{value:t.etax.id,callback:function(e){t.$set(t.etax,"id",e)},expression:"etax.id"}}),a("v-text-field",{attrs:{label:"缴税凭证号",placeholder:"",rules:[t.rules.required],autofocus:!0,readonly:t.getReadonly()},model:{value:t.etax.taxid,callback:function(e){t.$set(t.etax,"taxid",e)},expression:"etax.taxid"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"纳税人",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.etax.taxer,callback:function(e){t.$set(t.etax,"taxer",e)},expression:"etax.taxer"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"房屋面积",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.etax.area,callback:function(e){t.$set(t.etax,"area",e)},expression:"etax.area"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"缴税金额",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.etax.tax,callback:function(e){t.$set(t.etax,"tax",e)},expression:"etax.tax"}})],1)],1)],1),a("v-card-actions",{attrs:{"justify-right":""}},[a("v-btn",{attrs:{color:"primary",rounded:"",disabled:!t.showToCC},on:{click:function(e){return t.toCC()}}},[t._v("上链")]),a("v-btn",{attrs:{color:"primary",rounded:"",disabled:!t.showSave},on:{click:function(e){return t.saveNew()}}},[t._v("保存")]),a("v-btn",{attrs:{color:"warning",rounded:""},on:{click:function(e){t.etax="",t.showdialog=!1}}},[t._v("关闭")])],1)],1)],1),a("v-snackbar",{attrs:{color:t.sb.color,timeout:t.sb.timeout,top:!0},model:{value:t.sb.show,callback:function(e){t.$set(t.sb,"show",e)},expression:"sb.show"}},[t._v(t._s(t.sb.text))])],1)],1)},i=[],o={data:function(){return{showdialog:!1,showSave:!1,showToCC:!1,dialogtype:1,etax:{},search:"",sb:{show:!1,color:"",text:"",timeout:3e3},headers:[{text:"缴税时间",align:"left",sortable:!1,value:"CreateDT"},{text:"纳税凭证编号",align:"left",sortable:!1,value:"TaxID"},{text:"纳税人",align:"center",value:"Taxer"},{text:"房屋面积",align:"center",value:"Area"},{text:"纳税金额",align:"center",value:"Tax"},{text:"数据上链",align:"center",sortable:!1,value:"action"}],items:[],rules:{required:function(t){return!!t||"请输入"},counter:function(t){return t.length<=20||"最多20个字符"}}}},mounted:function(){this.refreshTaxList()},methods:{refreshTaxList:function(){var t=this;this.$axios.get("/api/estatetax/queryall",{params:{}}).then((function(e){0==e.data.Code&&(null==e.data.Status?t.items=[]:t.items=e.data.Status)}))},saveNew:function(){var t=this,e={taxid:this.etax.taxid,taxer:this.etax.taxer,area:this.etax.area,tax:this.etax.tax};this.$axios.post("/api/estatetax/create",this.$qs.stringify(e)).then((function(e){0==e.data.Code?(t.refreshTaxList(),t.showdialog=!1,t.etax={},t.sb.color="success",t.sb.text="操作成功!",t.sb.show=!0):(t.sb.color="error",t.sb.text="操作失败："+e.data.Status)}))},getColorByCC:function(t){return t>0?"green":"warning"},getDisToCC:function(t){return!(t>0)},getDialogTitle:function(t){switch(t){case 1:return"新增纳税凭证";case 2:return"纳税凭证上链";case 3:return"链上纳税凭证查询"}},onCreate:function(){this.dialogtype=1,this.showSave=!0,this.showToCC=!1,this.etax={},this.showdialog=!0},onToCC:function(t,e,a,s,i){this.dialogtype=2,this.showSave=!1,this.showToCC=!0,this.etax.uuid=t,this.etax.taxid=e,this.etax.taxer=a,this.etax.area=s,this.etax.tax=i,this.showdialog=!0},toCC:function(){var t=this,e={uuid:this.etax.uuid,taxid:this.etax.taxid,taxer:this.etax.taxer,area:this.etax.area,tax:this.etax.tax};this.$axios.post("/api/estatetax/tocc",this.$qs.stringify(e)).then((function(e){0==e.data.Code?(t.showdialog=!1,t.etax={},t.sb.color="success",t.sb.text="操作成功,纳税凭证已上链！",t.refreshTaxList(),t.sb.show=!0):(t.sb.color="error",t.sb.text="操作失败："+e.data.Status,t.sb.show=!0)}))},queryCC:function(t){var e=this;this.showdialog=!0,this.$axios.get("/api/cc/estatetax/querybytaxid?taxid="+t).then((function(t){0==t.data.Code?(e.showSave=!1,e.showToCC=!1,e.dialogtype=3,e.etax=t.data.Status[0]):(e.showdialog=!1,e.sb.color="error",e.sb.text="查询链上纳税凭证失败："+t.data.Status,e.sb.show=!0)}))},getReadonly:function(){switch(this.dialogtype){case 1:return!1;case 2:return!0;case 3:return!0}}}},r=o,l=a("2877"),n=a("6544"),c=a.n(n),d=a("8336"),u=a("b0af"),x=a("99d9"),h=a("cc20"),v=a("62ad"),f=a("a523"),b=a("8fea"),C=a("169a"),g=a("ce7e"),w=a("132d"),p=a("0fd9"),y=a("2db4"),T=a("2fa4"),m=a("8654"),k=Object(l["a"])(r,s,i,!1,null,null,null);e["default"]=k.exports;c()(k,{VBtn:d["a"],VCard:u["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VChip:h["a"],VCol:v["a"],VContainer:f["a"],VDataTable:b["a"],VDialog:C["a"],VDivider:g["a"],VIcon:w["a"],VRow:p["a"],VSnackbar:y["a"],VSpacer:T["a"],VTextField:m["a"]})}}]);