(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab46f"],{"151f":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"netcon"}},[o("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[o("v-card",{staticClass:"mx-auto",attrs:{"max-width":"100%"}},[o("v-divider"),o("v-card",[o("v-card-title",{staticClass:"grey lighten-4"},[e._v("不动产登记业务受理与证书发放 "),o("v-spacer"),o("v-text-field",{attrs:{label:"按内容查询","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("v-btn",{attrs:{icon:""},on:{click:e.refreshBooks}},[o("v-icon",[e._v("fas fa-sync-alt")])],1),o("v-btn",{attrs:{icon:""},on:{click:e.onCreate}},[o("v-icon",[e._v("fas fa-plus")])],1)],1),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.BookID",fn:function(t){var a=t.item;return[o("v-chip",{attrs:{color:e.getColorByCC(a.IsCCed)}},[e._v(e._s(a.BookID))])]}},{key:"item.action",fn:function(t){var a=t.item;return[o("v-btn",{attrs:{color:"success",disabled:!e.getDisToCC(a.IsCCed)},on:{click:function(t){return e.onToCC(a.ID,a.BookID,a.NetconID,a.TaxID,a.Owner,a.Addr,a.Area)}}},[e._v("上链")]),o("v-btn",{attrs:{color:"info",disabled:e.getDisToCC(a.IsCCed)},on:{click:function(t){return e.queryCC(a.BookID)}}},[e._v("查链")])]}}])})],1)],1),o("v-dialog",{attrs:{width:"800"},model:{value:e.showdialog,callback:function(t){e.showdialog=t},expression:"showdialog"}},[o("v-card",{attrs:{"fill-height":""}},[o("v-card-title",{staticClass:"title grey lighten-2",attrs:{"primary-title":""}},[e._v(e._s(e.getDialogTitle(e.dialogtype)))]),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{hidden:!0},model:{value:e.ebook.id,callback:function(t){e.$set(e.ebook,"id",t)},expression:"ebook.id"}}),o("v-text-field",{attrs:{label:"不动产权证书编号",placeholder:"",rules:[e.rules.required],autofocus:!0,readonly:e.getReadonly()},model:{value:e.ebook.bookid,callback:function(t){e.$set(e.ebook,"bookid",t)},expression:"ebook.bookid"}})],1)],1),o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"产权所有人",placeholder:"",rules:[e.rules.required],readonly:e.getReadonly()},model:{value:e.ebook.owner,callback:function(t){e.$set(e.ebook,"owner",t)},expression:"ebook.owner"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"房屋面积",placeholder:"",rules:[e.rules.required],readonly:e.getReadonly()},model:{value:e.ebook.area,callback:function(t){e.$set(e.ebook,"area",t)},expression:"ebook.area"}})],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{label:"房屋地址",placeholder:"",rules:[e.rules.required],readonly:e.getReadonly()},model:{value:e.ebook.addr,callback:function(t){e.$set(e.ebook,"addr",t)},expression:"ebook.addr"}})],1)],1),o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-select",{attrs:{items:e.netconids,label:"合同备案号(链上查询)",placeholder:"",readonly:e.getReadonly()},model:{value:e.ebook.netconid,callback:function(t){e.$set(e.ebook,"netconid",t)},expression:"ebook.netconid"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-select",{attrs:{items:e.etaxids,label:"缴纳凭证号(链上查询)",placeholder:"",readonly:e.getReadonly()},model:{value:e.ebook.taxid,callback:function(t){e.$set(e.ebook,"taxid",t)},expression:"ebook.taxid"}})],1)],1)],1),o("v-card-actions",{attrs:{"justify-right":""}},[o("v-btn",{attrs:{color:"primary",rounded:"",disabled:!e.showToCC},on:{click:function(t){return e.toCC()}}},[e._v("上链")]),o("v-btn",{attrs:{color:"primary",rounded:"",disabled:!e.showSave},on:{click:function(t){return e.saveNew()}}},[e._v("保存")]),o("v-btn",{attrs:{color:"warning",rounded:""},on:{click:function(t){e.showdialog=!1}}},[e._v("关闭")])],1)],1)],1),o("v-snackbar",{attrs:{color:e.sb.color,timeout:e.sb.timeout,top:!0},model:{value:e.sb.show,callback:function(t){e.$set(e.sb,"show",t)},expression:"sb.show"}},[e._v(e._s(e.sb.text))])],1)],1)},s=[],i={data:function(){return{showdialog:!1,showSave:!1,showToCC:!1,dialogtype:1,ebook:{},netconids:[],etaxids:[],search:"",sb:{show:!1,color:"",text:"",timeout:3e3},headers:[{text:"办理时间",align:"left",sortable:!1,value:"CreateDT"},{text:"不动产权证书编号",align:"left",sortable:!1,value:"BookID"},{text:"产权所有人",align:"center",value:"Owner"},{text:"房屋地址",align:"center",value:"Addr"},{text:"房屋面积",align:"center",value:"Area"},{text:"合同备案号",align:"center",value:"NetconID"},{text:"纳税凭证号",align:"center",value:"TaxID"},{text:"数据上链",align:"center",sortable:!1,value:"action"}],items:[],rules:{required:function(e){return!!e||"请输入"},counter:function(e){return e.length<=20||"最多20个字符"}}}},mounted:function(){this.refreshBooks(),this.refreshNetconids(),this.refreshEtaxids()},methods:{refreshBooks:function(){var e=this;this.$axios.get("/api/estatebook/queryall",{params:{}}).then((function(t){0==t.data.Code&&(null==t.data.Status?e.items=[]:e.items=t.data.Status)}))},refreshNetconids:function(){var e=this;this.$axios.get("/api/cc/netcon/queryallid",{params:{}}).then((function(t){0==t.data.Code&&(null==t.data.Status?e.netconids=[]:e.netconids=t.data.Status)}))},refreshEtaxids:function(){var e=this;this.$axios.get("/api/cc/estatetax/queryallid",{params:{}}).then((function(t){0==t.data.Code&&(null==t.data.Status?e.etaxids=[]:e.etaxids=t.data.Status)}))},saveNew:function(){var e=this,t={bookid:this.ebook.bookid,netconid:this.ebook.netconid,taxid:this.ebook.taxid,owner:this.ebook.owner,addr:this.ebook.addr,area:this.ebook.area};this.$axios.post("/api/estatebook/create",this.$qs.stringify(t)).then((function(t){0==t.data.Code?(e.refreshBooks(),e.showdialog=!1,e.ebook={},e.sb.color="success",e.sb.text="操作成功!",e.sb.show=!0):(e.sb.color="error",e.sb.text="操作失败："+t.data.Status)}))},getColorByCC:function(e){return e>0?"green":"warning"},getDisToCC:function(e){return!(e>0)},getDialogTitle:function(e){switch(e){case 1:return"新增不动产权证书";case 2:return"不动产权证书上链";case 3:return"不动产权证书链上查询"}},onCreate:function(){this.dialogtype=1,this.showSave=!0,this.showToCC=!1,this.ebook={},this.showdialog=!0},onToCC:function(e,t,o,a,s,i,r){this.dialogtype=2,this.showSave=!1,this.showToCC=!0,this.ebook.uuid=e,this.ebook.bookid=t,this.ebook.netconid=o,this.ebook.taxid=a,this.ebook.owner=s,this.ebook.addr=i,this.ebook.area=r,this.showdialog=!0},toCC:function(){var e=this,t={uuid:this.ebook.uuid,bookid:this.ebook.bookid,netconid:this.ebook.netconid,taxid:this.ebook.taxid,owner:this.ebook.owner,area:this.ebook.area,addr:this.ebook.addr};this.$axios.post("/api/estatebook/tocc",this.$qs.stringify(t)).then((function(t){0==t.data.Code?(e.showdialog=!1,e.ebook={},e.sb.color="success",e.sb.text="操作成功,不动产权证书已上链！",e.refreshBooks(),e.sb.show=!0):(e.sb.color="error",e.sb.text="操作失败："+t.data.Status,e.sb.show=!0)}))},queryCC:function(e){var t=this;this.showdialog=!0,this.$axios.get("/api/cc/estatebook/querybybookid?bookid="+e).then((function(e){0==e.data.Code?(t.showSave=!1,t.showToCC=!1,t.dialogtype=3,t.ebook=e.data.Status[0]):(t.showdialog=!1,t.sb.color="error",t.sb.text="查询链上不动产权证书失败："+e.data.Status,t.sb.show=!0)}))},getReadonly:function(){switch(this.dialogtype){case 1:return!1;case 2:return!0;case 3:return!0}}}},r=i,n=o("2877"),l=o("6544"),d=o.n(l),c=o("8336"),u=o("b0af"),b=o("99d9"),h=o("cc20"),k=o("62ad"),v=o("a523"),f=o("8fea"),g=o("169a"),x=o("ce7e"),C=o("132d"),w=o("0fd9"),p=o("b974"),y=o("2db4"),m=o("2fa4"),D=o("8654"),S=Object(n["a"])(r,a,s,!1,null,null,null);t["default"]=S.exports;d()(S,{VBtn:c["a"],VCard:u["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VChip:h["a"],VCol:k["a"],VContainer:v["a"],VDataTable:f["a"],VDialog:g["a"],VDivider:x["a"],VIcon:C["a"],VRow:w["a"],VSelect:p["a"],VSnackbar:y["a"],VSpacer:m["a"],VTextField:D["a"]})}}]);