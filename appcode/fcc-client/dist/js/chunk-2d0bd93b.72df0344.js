(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd93b"],{"2d1d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"netcon"}},[a("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"100%"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4"},[t._v("房屋交易备案管理 "),a("v-spacer"),a("v-text-field",{attrs:{label:"按内容查询","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-btn",{attrs:{icon:""},on:{click:t.refreshNetconList}},[a("v-icon",[t._v("fas fa-sync-alt")])],1),a("v-btn",{attrs:{icon:""},on:{click:t.onCreate}},[a("v-icon",[t._v("fas fa-plus")])],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,search:t.search},scopedSlots:t._u([{key:"item.NetconID",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{color:t.getColorByCC(n.IsCCed)}},[t._v(t._s(n.NetconID))])]}},{key:"item.action",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{color:"success",disabled:!t.getDisToCC(n.IsCCed)},on:{click:function(e){return t.onToCC(n.ID,n.NetconID,n.ApplyA,n.ApplyB,n.Addr,n.Area,n.Balance)}}},[t._v("上链")]),a("v-btn",{attrs:{color:"info",disabled:t.getDisToCC(n.IsCCed)},on:{click:function(e){return t.queryCC(n.NetconID)}}},[t._v("查链")])]}}])})],1)],1),a("v-dialog",{attrs:{width:"800"},model:{value:t.showdialog,callback:function(e){t.showdialog=e},expression:"showdialog"}},[a("v-card",{attrs:{"fill-height":""}},[a("v-card-title",{staticClass:"title grey lighten-2",attrs:{"primary-title":""}},[t._v(t._s(t.getDialogTitle(t.dialogtype)))]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{hidden:!0},model:{value:t.netcon.id,callback:function(e){t.$set(t.netcon,"id",e)},expression:"netcon.id"}}),a("v-text-field",{attrs:{label:"合同备案号",placeholder:"",rules:[t.rules.required],autofocus:!0,readonly:t.getReadonly()},model:{value:t.netcon.netconid,callback:function(e){t.$set(t.netcon,"netconid",e)},expression:"netcon.netconid"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"甲方（卖方）",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.netcon.applya,callback:function(e){t.$set(t.netcon,"applya",e)},expression:"netcon.applya"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"乙方（买方）",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.netcon.applyb,callback:function(e){t.$set(t.netcon,"applyb",e)},expression:"netcon.applyb"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"房屋地址",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.netcon.addr,callback:function(e){t.$set(t.netcon,"addr",e)},expression:"netcon.addr"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"房屋面积",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.netcon.area,callback:function(e){t.$set(t.netcon,"area",e)},expression:"netcon.area"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"成交金额",placeholder:"",rules:[t.rules.required],readonly:t.getReadonly()},model:{value:t.netcon.balance,callback:function(e){t.$set(t.netcon,"balance",e)},expression:"netcon.balance"}})],1)],1)],1),a("v-card-actions",{attrs:{"justify-right":""}},[a("v-btn",{attrs:{color:"primary",rounded:"",disabled:!t.showToCC},on:{click:function(e){return t.toCC()}}},[t._v("上链")]),a("v-btn",{attrs:{color:"primary",rounded:"",disabled:!t.showSave},on:{click:function(e){return t.saveNew()}}},[t._v("保存")]),a("v-btn",{attrs:{color:"warning",rounded:""},on:{click:function(e){t.netcon="",t.showdialog=!1}}},[t._v("关闭")])],1)],1)],1),a("v-snackbar",{attrs:{color:t.sb.color,timeout:t.sb.timeout,top:!0},model:{value:t.sb.show,callback:function(e){t.$set(t.sb,"show",e)},expression:"sb.show"}},[t._v(t._s(t.sb.text))])],1)],1)},o=[],s={data:function(){return{showdialog:!1,showSave:!1,showToCC:!1,dialogtype:1,netcon:{},search:"",sb:{show:!1,color:"",text:"",timeout:3e3},headers:[{text:"签订时间",align:"left",sortable:!1,value:"CreateDT"},{text:"合同编号",align:"left",sortable:!1,value:"NetconID"},{text:"甲方",align:"center",value:"ApplyA"},{text:"乙方",align:"center",value:"ApplyB"},{text:"房屋地址",align:"center",value:"Addr"},{text:"房屋面积",align:"center",value:"Area"},{text:"合同金额",align:"center",value:"Balance"},{text:"数据上链",align:"center",sortable:!1,value:"action"}],items:[],rules:{required:function(t){return!!t||"请输入"},counter:function(t){return t.length<=20||"最多20个字符"}}}},mounted:function(){this.refreshNetconList()},methods:{refreshNetconList:function(){var t=this;this.$axios.get("/api/netcon/queryall",{params:{}}).then((function(e){0==e.data.Code&&(null==e.data.Status?t.items=[]:t.items=e.data.Status)}))},saveNew:function(){var t=this,e={netconid:this.netcon.netconid,applya:this.netcon.applya,applyb:this.netcon.applyb,addr:this.netcon.addr,area:this.netcon.area,balance:this.netcon.balance};this.$axios.post("/api/netcon/create",this.$qs.stringify(e)).then((function(e){0==e.data.Code?(t.refreshNetconList(),t.showdialog=!1,t.netcon={},t.sb.color="success",t.sb.text="操作成功!",t.sb.show=!0):(t.sb.color="error",t.sb.text="操作失败："+e.data.Status)}))},getColorByCC:function(t){return t>0?"green":"warning"},getDisToCC:function(t){return!(t>0)},getDialogTitle:function(t){switch(t){case 1:return"新增网签合同备案";case 2:return"网签合同上链";case 3:return"链上网签合同查询"}},onCreate:function(){this.dialogtype=1,this.showSave=!0,this.showToCC=!1,this.netcon={},this.showdialog=!0},onToCC:function(t,e,a,n,o,s,c){this.dialogtype=2,this.showSave=!1,this.showToCC=!0,this.netcon.uuid=t,this.netcon.netconid=e,this.netcon.applya=a,this.netcon.applyb=n,this.netcon.addr=o,this.netcon.area=s,this.netcon.balance=c,this.showdialog=!0},toCC:function(){var t=this,e={uuid:this.netcon.uuid,netconid:this.netcon.netconid,applya:this.netcon.applya,applyb:this.netcon.applyb,addr:this.netcon.addr,area:this.netcon.area,balance:this.netcon.balance};this.$axios.post("/api/netcon/tocc",this.$qs.stringify(e)).then((function(e){0==e.data.Code?(t.showdialog=!1,t.netcon={},t.sb.color="success",t.sb.text="操作成功,网签合同已上链！",t.refreshNetconList(),t.sb.show=!0):(t.sb.color="error",t.sb.text="操作失败："+e.data.Status,t.sb.show=!0)}))},queryCC:function(t){var e=this;this.showdialog=!0,this.$axios.get("/api/cc/netcon/querybynetconid?netconid="+t).then((function(t){0==t.data.Code?(e.showSave=!1,e.showToCC=!1,e.dialogtype=3,e.netcon=t.data.Status[0]):(e.showdialog=!1,e.sb.color="error",e.sb.text="查询链上合同失败："+t.data.Status,e.sb.show=!0)}))},getReadonly:function(){switch(this.dialogtype){case 1:return!1;case 2:return!0;case 3:return!0}}}},c=s,l=a("2877"),r=a("6544"),i=a.n(r),d=a("8336"),u=a("b0af"),h=a("99d9"),v=a("cc20"),p=a("62ad"),b=a("a523"),f=a("8fea"),g=a("169a"),C=a("132d"),y=a("0fd9"),w=a("2db4"),x=a("2fa4"),m=a("8654"),k=Object(l["a"])(c,n,o,!1,null,null,null);e["default"]=k.exports;i()(k,{VBtn:d["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VChip:v["a"],VCol:p["a"],VContainer:b["a"],VDataTable:f["a"],VDialog:g["a"],VIcon:C["a"],VRow:y["a"],VSnackbar:w["a"],VSpacer:x["a"],VTextField:m["a"]})}}]);